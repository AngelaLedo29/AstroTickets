---
import Footer from "../components/Footer.astro";
import Navbar from "../components/Navbar.astro";

const metrics = [
    {title: "Entradas vendidas hoy", value: 234},
    {title: "Ingresos totales", value: "65,42€"},
    {title: "Usuarios activos", value: 100},
];
---
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard (Panel de Métricas)</title>
</head>
<body class="min-h-screen flex flex-col">
    <Navbar />

    <div class="relative bg-linear-to-br from-gray-50 via-yellow-50 to-indigo-50 text-gray-800 md:flex-row">
        <div class="absolute inset-0 bg-[rgba(255,255,200,0.2)] pointer-events-none"></div>

        <main class="flex-1 max-w-7xl mx-auto p-8 relative">
            <section id="dashboard" class="pb-16 flex flex-col gap-12">
                <h2 class="text-center text-4xl font-extrabold text-yellow-600">
                    Panel de Métricas
                </h2>

                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 max-w-6xl mx-auto mb-12">
                    {metrics.map(metric => (
                        <div class={`p-6 rounded-xl shadow-lg text-center bg-white
                            transform transition duration-300
                            hover:scale-[1.03] hover:shadow-xl
                            border border-gray-200`}>

                                <h3 class="text-3xl sm:text-4xl font-bold mb-2 text-gray-900">
                                    {metric.value}
                                </h3>
                                
                                <p class="font-semibold text-gray-600 text-sm sm:text-base">
                                    {metric.title}
                                </p>
                        </div>
                    ))}
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-full sm:max-w-6xl mx-auto">
                    <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200">
                        <h3 class="text-2xl font-bold text-center text-yellow-600 mb-6">
                            Estadísticas Semanales
                        </h3>

                        <canvas id="dashboardChart" class="rounded-xl w-full h-64"></canvas>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200">
                        <h3 class="text-2xl font-bold text-center text-yellow-600 mb-6">
                            Distribución por Categoría
                        </h3>

                        <div class="w-full h-64 flex items-center justify-center">
                            <canvas id="dashboardPieChart" class="w-60 h-60"></canvas>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module">
        document.addEventListener('DOMContentLoaded', () => {
            const graphic = {
                labels: ["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],
                datasets: [
                    {
                        label: "Ventas",
                        data: [12,19,8,15,22,30,25],
                        backgroundColor: "#f9d56e",
                        borderRadius: 8
                    }
                ]
            };

            const ctx = document.getElementById('dashboardChart');
            new Chart(ctx, {
                type: 'bar',
                data: graphic,
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { display: false },
                        tooltip: { backgroundColor: "#3a1f00", titleColor: '#fff2cc', bodyColor: '#ffffff' }
                    },
                    scales: {
                        x: { ticks: { color: '#4b5563' }, grid: { color: 'rgba(255,255,255,0.1)' } },
                        y: { ticks: { color: '#4b5563' }, grid: { color: '#e5e7eb' }, beginAtZero: true }
                    }
                }
            });

            const category = {
                labels: ["Entradas VIP", "Entradas Generales", "Entradas Early Bird"],
                datasets: [{
                    data: [35, 40, 15],
                    backgroundColor: ['#f9d56e', '#ffe699', '#d4a373'],
                    borderColor: '#ffffff',
                    borderWidth: 2,
                }]
            }

            const ctxPie = document.getElementById('dashboardPieChart');
            new Chart(ctxPie, {
                type: "pie",
                data: category,
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: "bottom",
                            labels: { color: "#4b5563", font: {size: 14, weight: 'bold'}}
                        },

                        tooltip: { backgroundColor: '#3a1f00', titleColor: '#fff2cc', bodyColor: '#ffffff' }
                    }
                }
            });
        });
    </script>

    <Footer />
</body>
</html>